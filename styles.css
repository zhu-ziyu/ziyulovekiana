:root{
    --bg:#f6f8ff;
    --ink:#1f1f1f;
    --glass:white;
    --ctaA:#7b5cff; --ctaB:#00c2ff;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0; overflow:hidden; font-family: system-ui, -apple-system, Segoe UI, Roboto, PingFang SC, Noto Sans SC, Arial, "Microsoft YaHei", sans-serif; color:var(--ink); background: var(--bg);}


/* dreamy background */
#bg-soft{ position:fixed; inset:-20%; z-index:-1; filter: blur(60px) saturate(1.1);
    background:
            radial-gradient(40% 35% at 20% 30%, #ffd1e6 0 50%, #0000 60%),
            radial-gradient(38% 32% at 80% 25%, #d8e7ff 0 50%, #0000 60%),
            radial-gradient(50% 45% at 30% 80%, #d2ffe2 0 45%, #0000 60%),
            radial-gradient(46% 45% at 75% 75%, #fff1c9 0 40%, #0000 60%),
            linear-gradient(120deg,#fbfeff,#f4f6ff);
    animation: bgFloat 18s ease-in-out infinite alternate;
}
@keyframes bgFloat{ to{ transform: translateY(-4%) translateX(2%); } }


/* stage */
#stage{ position:fixed; inset:0; padding:24px; display:flex; align-items:center; justify-content:center; }
#bubble-layer{ position:absolute; inset:0; }


/* glassy rainbow bubbles */
.bubble{ position:absolute; min-width:120px; max-width:240px; padding:12px 16px; border-radius:18px; font-weight:700; font-size:14px; line-height:1.2; letter-spacing:.2px; user-select:none; cursor:pointer;
    color:#1b1b1b; text-align:center;
    background: linear-gradient(135deg, #ffffffcc, #ffffff88);
    border:1px solid #ffffffaa;
    box-shadow: 0 10px 26px rgba(0,0,0,.10), inset 0 1px 0 rgba(255,255,255,.8);
    backdrop-filter: blur(8px) saturate(1.2);
    -webkit-backdrop-filter: blur(8px) saturate(1.2);
    transition: transform .25s ease, opacity .25s ease, filter .25s ease;
    outline:none;
}
/* colorful halo using gradient border & glow */
.bubble::before{ content:""; position:absolute; inset:-2px; border-radius:20px; z-index:-1;
    background: conic-gradient(from 90deg, var(--c1), var(--c2), var(--c3), var(--c1));
    filter: blur(10px) saturate(1.4);
}
/* inner glossy shine */
.bubble::after{ content:""; position:absolute; left:12px; right:12px; top:6px; height:34%; border-radius:14px; background: linear-gradient(180deg, #fff8, #fff0); mix-blend-mode:screen; pointer-events:none; }
.bubble:hover{ transform: translateZ(0) scale(1.06); filter: brightness(1.05); }


/* floating micro-animations */
@keyframes bob { 0%{ transform: translate(var(--tx,0), var(--ty,0)) scale(1) } 50%{ transform: translate(calc(var(--tx,0) + 2px), calc(var(--ty,0) - 4px)) scale(1.015) } 100%{ transform: translate(var(--tx,0), var(--ty,0)) scale(1) } }
.bubble{ animation: bob calc(3s + var(--rnd)*2s) ease-in-out infinite; }


/* pop animation */
@keyframes pop { 0%{ transform: translate(var(--tx), var(--ty)) scale(1); opacity:1; } 70%{ transform: translate(var(--tx), var(--ty)) scale(1.35) rotate(3deg); opacity:.6; } 100%{ transform: translate(var(--tx), var(--ty)) scale(.2) rotate(-18deg); opacity:0; } }
.popping{ animation: pop .42s cubic-bezier(.2,.8,.2,1) forwards !important; filter: saturate(1.3) blur(.5px); }


/* pop ring & sparkles */
.ring{ position:absolute; border-radius:999px; pointer-events:none; box-shadow: 0 0 0 2px #fff8 inset, 0 0 24px #fff6; opacity:.9; }
.ring.anim{ animation: ring .45s ease-out forwards; }
@keyframes ring{ from{ transform: translate(-50%,-50%) scale(.4); opacity:1 } to{ transform: translate(-50%,-50%) scale(1.7); opacity:0 } }
.spark{ position:absolute; width:6px; height:6px; border-radius:50%; background: radial-gradient(#fff, #fff0); pointer-events:none; animation: spark .6s ease-out forwards; }
@keyframes spark{ to{ transform: translate(var(--sx), var(--sy)) scale(0.2); opacity:0 } }


/* CTA button */
#cta{ position:absolute; inset:auto auto 48px 50%; transform:translateX(-50%); display:none; padding:14px 22px; border-radius:999px; font-size:16px; font-weight:800; color:#fff; cursor:pointer; border:0; outline:none;
    background: linear-gradient(135deg,var(--ctaA),var(--ctaB)); box-shadow: 0 16px 32px rgba(0,0,0,.18); }
#cta.show{ display:inline-flex; align-items:center; gap:10px; animation: pulse 1.4s ease-in-out infinite; }
@keyframes pulse{ 0%,100%{ filter: drop-shadow(0 12px 28px rgba(123,92,255,.45)); } 50%{ filter: drop-shadow(0 8px 18px rgba(0,0,0,.18)); } }
#cta:active{ transform:translateX(-50%) scale(.98); }


/* Final dialog */
#final{ position:absolute; inset:0; display:grid; place-items:center; padding:32px; text-align:center; opacity:0; pointer-events:none; transition:opacity .6s ease; }
#final.show{ opacity:1; }
#final .card{ background: linear-gradient(180deg,#ffffffcc,#ffffffaa); border:1px solid #fff; border-radius:24px; padding:28px 30px; backdrop-filter: blur(10px); box-shadow: 0 16px 40px rgba(0,0,0,.16); }
#final h1{ margin:0 0 10px; font-size: clamp(22px, 5vw, 46px); }
#final strong{ color:var(--ctaA) }
#final p{ margin:0; color:#444; font-size: clamp(14px, 3vw, 18px); }


/* toast */
#toast{ position:fixed; left:50%; bottom:16px; transform:translateX(-50%); background:#000a; color:#fff; padding:8px 12px; border-radius:999px; font-size:12px; display:none; }